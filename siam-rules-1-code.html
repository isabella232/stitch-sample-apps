<html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>	
  <script src="https://s3.amazonaws.com/stitch-sdks/js/library/v2/stable/stitch.min.js"></script>
  <script>
    const client = new stitch.StitchClient('stitchdocs-jdtdl');
    const db = client.service('mongodb', 'mongodb-atlas').db('HR');

    client.login('dafu@bufudlur.et', 'sekritpwd').then((userId) =>
      {console.log(userId);
      displayEmployees();}
    ).catch(err => {
      console.error(err)
    });

  function displayEmployees() {
    db.collection('employees_secured').find({}).sort({"name.last": 1}).execute().then(docs => {
      html = docs.map(e => '<tr><td>' + e.name.last + ', ' + e.name.first + '</td>' +
        '<td>' + e.email + '</td><td>' + e.role + ' - ' + e.level + '</td><td>$' + 
        e.salary + '</td></tr>').join('');
      document.getElementById('employees').innerHTML = html;
    });
  }
  </script>
  <body>
    <table class='table'>
      <thead><tr><th>Name</th><th>Email</th><th>Title</th><th>Salary</th></tr></thead>
      <tbody id='employees'></tbody>
    </table>
  </body>
</html>